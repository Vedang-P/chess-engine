<svg xmlns="http://www.w3.org/2000/svg" width="1600" height="900" viewBox="0 0 1600 900" role="img" aria-label="Move generation pipeline">
  <defs>
    <style>
      .bg { fill: #161616; }
      .title { fill: #e6e2d8; font-family: "IBM Plex Sans", "Segoe UI", sans-serif; font-size: 44px; font-weight: 600; }
      .subtitle { fill: #c6a25a; font-family: "IBM Plex Sans", "Segoe UI", sans-serif; font-size: 20px; font-weight: 500; }
      .box { fill: #1e1e1e; stroke: #2b2b2b; stroke-width: 2; rx: 16; }
      .h { fill: #e6e2d8; font-family: "IBM Plex Sans", "Segoe UI", sans-serif; font-size: 24px; font-weight: 600; }
      .t { fill: #d1ccc2; font-family: "IBM Plex Sans", "Segoe UI", sans-serif; font-size: 18px; }
      .arrow { stroke: #c6a25a; stroke-width: 3; fill: none; marker-end: url(#arrow); }
      .danger { stroke: #7d2a2a; }
    </style>
    <marker id="arrow" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M0,0 L0,12 L10,6 z" fill="#c6a25a" />
    </marker>
  </defs>

  <rect class="bg" x="0" y="0" width="1600" height="900" />
  <text class="title" x="70" y="82">Move Generation Pipeline</text>
  <text class="subtitle" x="70" y="116">Correctness-first legal move production</text>

  <rect class="box" x="90" y="210" width="300" height="180" />
  <text class="h" x="120" y="260">Pseudo-Legal</text>
  <text class="t" x="120" y="296">Pawns, leapers, sliders</text>
  <text class="t" x="120" y="326">castling + promotions</text>

  <rect class="box" x="470" y="210" width="300" height="180" />
  <text class="h" x="500" y="260">Make Move</text>
  <text class="t" x="500" y="296">Apply move on board</text>
  <text class="t" x="500" y="326">Update ep/castling/clock</text>

  <rect class="box" x="850" y="210" width="300" height="180" />
  <text class="h" x="880" y="260">King Safety</text>
  <text class="t" x="880" y="296">in_check(side)</text>
  <text class="t" x="880" y="326">discard illegal states</text>

  <rect class="box" x="1230" y="210" width="280" height="180" />
  <text class="h" x="1260" y="260">Unmake Move</text>
  <text class="t" x="1260" y="296">Restore from UndoState</text>
  <text class="t" x="1260" y="326">Reversible search node</text>

  <path class="arrow" d="M390 300 L470 300" />
  <path class="arrow" d="M770 300 L850 300" />
  <path class="arrow" d="M1150 300 L1230 300" />

  <rect class="box" x="400" y="520" width="800" height="220" />
  <text class="h" x="440" y="575">Output: Legal Move List</text>
  <text class="t" x="440" y="615">Only moves that keep the moving side's king safe survive.</text>
  <text class="t" x="440" y="645">This list feeds perft verification and alpha-beta search.</text>
  <text class="t" x="440" y="675">Source: engine/movegen.py + engine/board.py</text>

  <path class="arrow" d="M1370 390 C1370 480, 1110 500, 1000 520" />
  <path class="arrow danger" d="M1000 390 C1000 470, 820 500, 760 520" />
</svg>
